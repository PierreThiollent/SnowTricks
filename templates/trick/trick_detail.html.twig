{% extends 'base.html.twig' %}

{% block title %}
    {{ trick.name }}
{% endblock %}

{% block body %}
    <section class="flex flex-col justify-center bg-fixed bg-center bg-cover bg-no-repeat relative"
             style="background-image:linear-gradient(90deg, rgba(31,41,55,1) 0%, rgba(255,255,255,0.3533614129245448) 100%), url({{ asset('images/hero.jpg') }});
                     height: 600px">
        <h1 class="ml-24 text-white text-6xl tracking-tight font-serif leading-none">
            {{ trick.name }}
        </h1>

        {% if (is_granted('IS_AUTHENTICATED_FULLY') and trick.user.id == app.user.id) or (is_granted('ROLE_ADMIN')) %}
            <div class="absolute right-14 top-8">
                <button class="mr-2 inline-block">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                         stroke="#fff">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                    </svg>
                </button>
                <button class="inline-block" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                         stroke="#fff">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                    </svg>
                </button>
            </div>
        {% endif %}
    </section>

    <section class="container flex justify-around flex-wrap mx-auto py-20 px-10">
        {% for image in trick.images %}
            <div class="max-w-md rounded flex-grow mb-5">
                <img src="{{ asset('images/sad.jpg') }}"
                     alt="{{ trick.name }} trick image">
            </div>
            <div class="max-w-md rounded flex-grow mb-5">
                <img src="{{ asset('images/sad.jpg') }}"
                     alt="{{ trick.name }} trick image">
            </div>
            <div class="max-w-md rounded flex-grow mb-5">
                <img src="{{ asset('images/sad.jpg') }}"
                     alt="{{ trick.name }} trick image">
            </div>
        {% endfor %}

        {% for video in trick.videos %}
            <iframe width="640" height="360" src="{{ video }}"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
        {% endfor %}
    </section>


    <hr class="max-w-2xl mx-auto">
    <section class="container mx-auto px-10 py-4">
        <p class="text-center">{{ trick.description }}</p>
        <div class="max-w-md mx-auto mt-12 flex justify-around ">
            <span class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2">
                Publié le {{ trick.publishedDate|date('d/m/Y') }}
            </span>
            <span class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2">
                {{ trick.category.name }}
            </span>
            <span class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 mr-2 mb-2">
                Date de modification
            </span>
        </div>
    </section>
    <hr class="max-w-2xl mx-auto mb-12">

    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <section class="container flex mx-auto items-center justify-center shadow-lg mb-4 max-w-lg">
            <form class="w-full max-w-xl bg-white rounded-lg px-4 pt-2">
                <div class="flex flex-wrap -mx-3 mb-6">
                    <h2 class="px-4 pt-3 pb-2 text-gray-800 text-lg">Ajouter un commentaire</h2>
                    <div class="w-full md:w-full px-3 mb-2 mt-2">
                        <textarea
                                class="bg-gray-100 rounded border border-gray-400 leading-normal resize-none w-full h-20 py-2 px-3 font-medium placeholder-gray-700 focus:outline-none focus:bg-white"
                                name="body" required></textarea>
                    </div>
                    <div class="w-full md:w-full flex items-start md:w-full px-3">
                        <div class="flex items-start w-1/2 text-gray-700 px-2 mr-auto">
                            <svg fill="none" class="w-5 h-5 text-gray-600 mr-1" viewBox="0 0 24 24"
                                 stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                      d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <p class="text-xs md:text-sm pt-px">Votre commentaire devra être validé.</p>
                        </div>
                        <div class="-mr-1">
                            <input type='submit'
                                   class="bg-white text-gray-700 font-medium py-1 px-4 border border-gray-400 rounded-lg tracking-wide mr-1 hover:bg-gray-100"
                                   value='Ajouter'>
                        </div>
                    </div>
                </div>
            </form>
        </section>
    {% endif %}

{% endblock %}

    {% block javascripts %}
    {% endblock %}